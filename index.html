<html>
  <head>
    <title>Public Writing Spots Seattle</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""/>
      
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""></script>
          
    <!-- Leaflet-providers comes AFTER Leaflet JS -->
    <script src="js/leaflet-providers.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <style>
      html, body {
        height: 100%;
        margin: 0;
      }
      
      #mapid {
        width: 600px;
        height: 400px;
      }
    </style>
    
    <style>body { padding: 0; margin: 0; } #mapid { height: 100%; width: 100vw; }</style>
  </head>

  <body>
    <div id="mapid"></div>
    <script src="spots.js" type="text/javascript"></script>

    <script>
      var mymap = L.map('mapid').setView([47.599450,-122.297745], 11);
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/light-v10',
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'pk.eyJ1IjoiZmxvdHQiLCJhIjoiQ3hUMU9UQSJ9.vpXm8h8Dz52ZcbmRbWgzkg'
        }).addTo(mymap);

      function onEachFeature(feature, layer) {
        var popupContent = "";
        if (feature.properties) {
          popupContent += "<b><a href=\"" + 
            feature.properties.tweetURL +"\">#" + 
            feature.properties.spotID +
            "</a>: " + feature.properties.spotName + "</b><br />" +
            feature.properties.spotDesc + "<br />" +
            "<a href=\"" + feature.properties.tweetURL +"\">" + 
            "<img src=\"" + feature.properties.thumbnailURL +
            "\" style=\"width:148px;height:100px;\"/></a>";
        }

        layer.bindPopup(popupContent);
      }

      L.geoJSON(spots, {
        style: function (feature) {
        return feature.properties && feature.properties.style;
        },

        onEachFeature: onEachFeature,
        pointToLayer: function (feature, latlng) {
          return L.circleMarker(latlng, {
            radius: 8,
            fillColor: "#ff7800",
            color: "#000",
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
          });
        }
      }).addTo(mymap);

    </script>
  </body>
</html>
